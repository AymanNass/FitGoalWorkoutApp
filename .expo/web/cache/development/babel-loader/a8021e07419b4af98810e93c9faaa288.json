{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/macuser/Desktop/FitGoalW/src/context/FirebaseContext.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { createContext } from 'react';\nimport firebase from 'firebase';\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport config from \"../config/firebase\";\nvar FirebaseContext = createContext();\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(config);\n}\n\nvar db = firebase.firestore();\nvar Firebase = {\n  getCurrentUser: function getCurrentUser() {\n    return firebase.auth().currentUser;\n  },\n  createUser: function createUser(user) {\n    var uid;\n    return _regeneratorRuntime.async(function createUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(firebase.auth().createUserWithEmailAndPassword(user.email, user.password));\n\n          case 3:\n            uid = Firebase.getCurrentUser().uid;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(db.collection(\"users\").doc(uid).set({\n              username: user.username,\n              email: user.email\n            }));\n\n          case 6:\n            delete user.password;\n            return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, user), {}, {\n              uid: uid\n            }));\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(\"error #createUser: \", _context.t0.message);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  },\n  getUserInfo: function getUserInfo(uid) {\n    var user;\n    return _regeneratorRuntime.async(function getUserInfo$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(db.collection(\"users\").doc(uid).get());\n\n          case 3:\n            user = _context2.sent;\n\n            if (!user.exists) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", user.data());\n\n          case 6:\n            _context2.next = 11;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(\"Error @getUserInfo: \", _context2.t0);\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  },\n  logOut: function logOut() {\n    return _regeneratorRuntime.async(function logOut$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(firebase.auth().signOut());\n\n          case 3:\n            return _context3.abrupt(\"return\", true);\n\n          case 6:\n            _context3.prev = 6;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(\"Erroe @logOut\", _context3.t0);\n\n          case 9:\n            return _context3.abrupt(\"return\", false);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  },\n  signIn: function signIn(email, password) {\n    return _regeneratorRuntime.async(function signIn$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", firebase.auth().signInWithEmailAndPassword(email, password));\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n};\n\nvar FirebaseProvider = function FirebaseProvider(props) {\n  return React.createElement(FirebaseContext.Provider, {\n    value: Firebase,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 12\n    }\n  }, props.children);\n};\n\nexport { FirebaseContext, FirebaseProvider };","map":{"version":3,"sources":["/Users/macuser/Desktop/FitGoalW/src/context/FirebaseContext.js"],"names":["React","createContext","firebase","config","FirebaseContext","apps","length","initializeApp","db","firestore","Firebase","getCurrentUser","auth","currentUser","createUser","user","createUserWithEmailAndPassword","email","password","uid","collection","doc","set","username","console","log","message","getUserInfo","get","exists","data","logOut","signOut","signIn","signInWithEmailAndPassword","FirebaseProvider","props","children"],"mappings":"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","sourcesContent":["import React,{createContext} from 'react'\n\nimport firebase from 'firebase'\nimport \"firebase/auth\"\nimport \"firebase/firestore\"\nimport config from '../config/firebase'\nconst FirebaseContext = createContext();\n\nif(!firebase.apps.length) {\n    firebase.initializeApp(config);\n}\n\nconst db = firebase.firestore();\n\nconst Firebase = {\n    getCurrentUser: () => {\n        return firebase.auth().currentUser\n    },\n\n    createUser: async(user) => {\n        try{\n            await firebase.auth().createUserWithEmailAndPassword(user.email, user.password);\n            const uid = Firebase.getCurrentUser().uid;\n\n\n            await db.collection(\"users\").doc(uid).set({\n                username: user.username,\n                email: user.email,\n            })\n            delete user.password\n            return {...user, uid }\n\n        }catch(error){\n            console.log(\"error #createUser: \", error.message)\n        }\n    },\n\n    getUserInfo: async (uid) => {\n        try {\n            const user = await db.collection(\"users\").doc(uid).get();\n\n            if(user.exists) {\n                return user.data()\n            }\n        }catch (error) {\n                console.log(\"Error @getUserInfo: \", error )\n        }\n    },\n    \n    logOut: async() => {\n        try{\n            await firebase.auth().signOut();\n            return true;\n        }catch(error) {\n            console.log(\"Erroe @logOut\", error)\n        }\n        return false;\n    },\n\n    signIn: async (email, password) => {\n        return firebase.auth().signInWithEmailAndPassword(email,password);\n    }\n\n    \n};\n\n\nconst FirebaseProvider = (props) => {\n    return <FirebaseContext.Provider value= {Firebase}>{props.children}</FirebaseContext.Provider>;\n};\n\nexport{FirebaseContext, FirebaseProvider}"]},"metadata":{},"sourceType":"module"}